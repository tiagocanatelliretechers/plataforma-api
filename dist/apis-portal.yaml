openapi: 3.0.3
info:
  title: Plataforma de Componentes - APIs de Tela e Ações
  version: 1.1.0
  description: |-
    API focada em:
    - Autenticação (login)
    - Layout da área logada (menu, usuário logado, branding)
    - Dashboard (tela única, front burro)
    - Gestão de usuários (CRUD + telas)
    - Lista de componentes (tela única)
    - Wizard de criação de componentes (tela única, steps)

servers:
  - url: https://api.plataforma-componentes.interno

tags:
  - name: Autenticacao
  - name: UI Layout
  - name: UI Dashboard
  - name: UI Usuarios
  - name: UI Componentes
  - name: Usuarios
  - name: Componentes

paths:
  ########################
  # AUTENTICAÇÃO
  ########################
  /autenticacao/token:
    post:
      tags: [Autenticacao]
      summary: Gera token de autenticação
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [login, senha]
              properties:
                login:
                  type: string
                senha:
                  type: string
            example:
              login: "joao.silva"
              senha: "Senha@Forte123"
      responses:
        '200':
          description: Token de autenticação gerado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResposta'
              example:
                tokenAcesso: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJqb2FvLnNpbHZhIn0.v1y0h8..."
                tipoToken: "Bearer"
                expiraEm: 3600

  ########################
  # UI - LAYOUT ÁREA LOGADA
  ########################
  /ui/layout:
    get:
      tags: [UI Layout]
      summary: Retorna o contexto da área logada
      description: |
        Traz informações globais da área logada, incluindo:
        - Dados do usuário logado
        - Estrutura do menu lateral
        - Branding da aplicação (nome, logo, produto)
      responses:
        '200':
          description: Contexto da área logada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LayoutAreaLogadaResposta'
              example:
                app:
                  id: "arch-hub"
                  nome: "Arch Hub"
                  subTitulo: "Porto Seguro"
                  logoUrl: "https://cdn.empresa.com/logos/arch-hub.png"
                usuario:
                  idUsuario: "usr-0001"
                  nomeExibicao: "João Silva"
                  email: "joao.silva@porto.com.br"
                  iniciais: "JS"
                  avatarUrl: null
                menu:
                  - id: "dashboard"
                    label: "Dashboard"
                    icone: "grid"
                    rotaFrontend: "/dashboard"
                    ativo: true
                    habilitado: true
                  - id: "componentes"
                    label: "Componentes"
                    icone: "cube"
                    rotaFrontend: "/componentes"
                    ativo: false
                    habilitado: true
                  - id: "automatizacoes"
                    label: "Automações"
                    icone: "zap"
                    rotaFrontend: "/automatizacoes"
                    ativo: false
                    habilitado: true
                  - id: "auditoria"
                    label: "Auditoria"
                    icone: "file-text"
                    rotaFrontend: "/auditoria"
                    ativo: false
                    habilitado: true
                  - id: "usuarios-permissoes"
                    label: "Usuários & Permissões"
                    icone: "users"
                    rotaFrontend: "/usuarios"
                    ativo: false
                    habilitado: true
                  - id: "ai-assistant"
                    label: "AI Assistant (Futuro)"
                    icone: "bot"
                    rotaFrontend: "/ai-assistant"
                    ativo: false
                    habilitado: false
                  - id: "canvas"
                    label: "Canvas (Futuro)"
                    icone: "layout"
                    rotaFrontend: "/canvas"
                    ativo: false
                    habilitado: false

  ########################
  # UI - DASHBOARD
  ########################
  /ui/dashboard:
    get:
      tags: [UI Dashboard]
      summary: Monta a tela de Dashboard da plataforma
      description: |
        Retorna toda a configuração e dados necessários para renderizar
        o dashboard (cards de contagem, gráfico de componentes criados,
        eventos recentes, status de integrações).
      responses:
        '200':
          description: Configuração e dados da tela de dashboard
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardTelaResposta'
              example:
                paginaId: "dashboard-principal"
                titulo: "Dashboard"
                subTitulo: "Visão geral da plataforma Arch Hub"
                cardsResumo:
                  - idCard: "business-components"
                    titulo: "Business Components"
                    descricao: "Componentes de negócio"
                    valor: 2
                    icone: "layers"
                    configuravel: true
                  - idCard: "extension-components"
                    titulo: "Extension Components"
                    descricao: "Componentes de extensão"
                    valor: 1
                    icone: "extension"
                    configuravel: true
                  - idCard: "technical-components"
                    titulo: "Technical Components"
                    descricao: "Componentes técnicos"
                    valor: 1
                    icone: "cpu"
                    configuravel: true
                  - idCard: "usuarios-ativos"
                    titulo: "Usuários Ativos"
                    descricao: "Usuários com acesso ativo"
                    valor: 4
                    icone: "user-check"
                    configuravel: false
                graficoComponentesCriados:
                  titulo: "Componentes Criados por Mês"
                  destaque:
                    valorAtual: 15
                    textoDestaque: "+15"
                    variacaoPercentual: 50.0
                    textoComparacao: "+50.0% do mês anterior"
                  serie:
                    unidadeEixoX: "mes"
                    unidadeEixoY: "quantidade"
                    pontos:
                      - mes: "Jul"
                        quantidade: 8
                      - mes: "Ago"
                        quantidade: 10
                      - mes: "Set"
                        quantidade: 6
                      - mes: "Out"
                        quantidade: 12
                      - mes: "Nov"
                        quantidade: 15
                eventosRecentes:
                  titulo: "Eventos Recentes"
                  descricao: "Últimas ações realizadas na plataforma"
                  itens:
                    - idEvento: "evt-001"
                      usuario:
                        nome: "João Silva"
                        iniciais: "JS"
                      tipoEvento: "Configuração atualizada"
                      descricaoCurta: "Configuração do API Gateway atualizada"
                      componenteNome: "Aprovação de Reserva"
                      haQuantoTempo: "há mais de 1 ano"
                      status: "Sucesso"
                    - idEvento: "evt-002"
                      usuario:
                        nome: "Ana Oliveira"
                        iniciais: "AO"
                      tipoEvento: "Componente atualizado"
                      descricaoCurta: "Componente atualizado"
                      componenteNome: "Gestão de Clientes"
                      haQuantoTempo: "há mais de 1 ano"
                      status: "Sucesso"
                    - idEvento: "evt-003"
                      usuario:
                        nome: "Pedro Costa"
                        iniciais: "PC"
                      tipoEvento: "Componente criado"
                      descricaoCurta: "Componente criado"
                      componenteNome: "Gestão de Clientes"
                      haQuantoTempo: "há quase 2 anos"
                      status: "Sucesso"
                statusIntegracoes:
                  titulo: "Status das Integrações"
                  descricao: "Status de conexão com sistemas externos"
                  integracoes:
                    - idIntegracao: "techstore"
                      nome: "TechStore"
                      status: "Conectado"
                      ultimaSincronizacao: "2025-12-05T09:15:00Z"
                    - idIntegracao: "git"
                      nome: "Git"
                      status: "Conectado"
                      ultimaSincronizacao: "2025-12-05T09:12:00Z"
                    - idIntegracao: "jira"
                      nome: "Jira"
                      status: "Conectado"
                      ultimaSincronizacao: "2025-12-05T09:10:00Z"
                    - idIntegracao: "sso"
                      nome: "SSO"
                      status: "Conectado"
                      ultimaSincronizacao: "2025-12-05T09:08:00Z"

  ########################
  # UI - USUÁRIOS (TELAS)
  ########################
  /ui/usuarios/lista:
    get:
      tags: [UI Usuarios]
      summary: Monta tela de listagem de usuários
      description: |
        Retorna configuração (filtros, colunas, ações) + dados paginados
        para renderizar a tela de lista de usuários.
      parameters:
        - in: query
          name: pagina
          schema:
            type: integer
            default: 0
        - in: query
          name: tamanho
          schema:
            type: integer
            default: 20
        - in: query
          name: busca
          schema:
            type: string
          description: Filtro por login, nome ou e-mail
        - in: query
          name: ativo
          schema:
            type: boolean
      responses:
        '200':
          description: Configuração da tela e dados da lista de usuários
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuariosListaTelaResposta'
              example:
                paginaId: "lista-usuarios"
                titulo: "Usuários da Plataforma"
                filtros:
                  - id: "busca"
                    type: "text"
                    label: "Buscar"
                    placeholder: "Nome, login ou e-mail"
                  - id: "ativo"
                    type: "select"
                    label: "Status"
                    placeholder: "Selecione"
                    options:
                      - value: "true"
                        label: "Ativo"
                      - value: "false"
                        label: "Inativo"
                colunas:
                  - id: "login"
                    label: "Login"
                    width: "180px"
                    sortable: true
                  - id: "nomeExibicao"
                    label: "Nome"
                    width: "220px"
                    sortable: true
                  - id: "email"
                    label: "E-mail"
                    width: "260px"
                    sortable: false
                  - id: "ativo"
                    label: "Status"
                    width: "100px"
                    sortable: true
                acoesLinha:
                  - id: "editar"
                    label: "Editar"
                    icon: "edit"
                    tipo: "link"
                    acao: "rota"
                    rotaFrontend: "/usuarios/{idUsuario}/editar"
                  - id: "desativar"
                    label: "Desativar"
                    icon: "lock"
                    tipo: "danger"
                    acao: "api"
                    endpoint: "/usuarios/{idUsuario}"
                    metodoHttp: "PATCH"
                acoesPagina:
                  - id: "criar-usuario"
                    label: "Criar Usuário"
                    icon: "user-plus"
                    tipo: "primary"
                    acao: "rota"
                    rotaFrontend: "/usuarios/novo"
                paginacao:
                  pagina: 0
                  tamanho: 20
                  totalElementos: 2
                  totalPaginas: 1
                linhas:
                  - idUsuario: "usr-0001"
                    login: "joao.silva"
                    nomeExibicao: "João da Silva"
                    email: "joao.silva@porto.com.br"
                    ativo: true
                  - idUsuario: "usr-0002"
                    login: "maria.oliveira"
                    nomeExibicao: "Maria Oliveira"
                    email: "maria.oliveira@porto.com.br"
                    ativo: false

  /ui/usuarios/form-criacao:
    get:
      tags: [UI Usuarios]
      summary: Monta tela de criação de usuário
      description: |
        Retorna metadados do formulário (campos, validação, selects, etc.)
        para criação de usuário. Sem valores iniciais.
      responses:
        '200':
          description: Configuração do formulário de criação de usuário
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioFormTelaResposta'
              example:
                formId: "criar-usuario"
                titulo: "Criar Usuário"
                descricao: "Preencha os dados para criar um novo usuário da plataforma"
                modo: "CRIACAO"
                submit:
                  method: "POST"
                  endpoint: "/usuarios"
                campos:
                  - id: "login"
                    type: "text"
                    label: "Login"
                    placeholder: "ex: joao.silva"
                    required: true
                    validation:
                      required: true
                      minLength: 3
                      maxLength: 64
                  - id: "nomeExibicao"
                    type: "text"
                    label: "Nome"
                    placeholder: "ex: João da Silva"
                    required: true
                    validation:
                      required: true
                      minLength: 3
                      maxLength: 120
                  - id: "email"
                    type: "email"
                    label: "E-mail"
                    placeholder: "ex: joao.silva@porto.com.br"
                    required: true
                    validation:
                      required: true
                  - id: "perfisAcessoIds"
                    type: "select_multiple"
                    label: "Perfis de Acesso"
                    helperText: "Selecione um ou mais perfis"
                    required: true
                    dataSource:
                      type: "api"
                      endpoint: "/perfis-acesso"
                      valueField: "idPerfilAcesso"
                      labelField: "nomePerfilAcesso"
                    validation:
                      required: true
                  - id: "timeIds"
                    type: "select_multiple"
                    label: "Times"
                    helperText: "Times aos quais o usuário está vinculado"
                    required: false
                    dataSource:
                      type: "api"
                      endpoint: "/times"
                      valueField: "idTime"
                      labelField: "nomeTime"
                  - id: "ativo"
                    type: "checkbox"
                    label: "Usuário ativo"
                    required: false
                valoresIniciais: {}

  /ui/usuarios/{usuarioId}/form-edicao:
    get:
      tags: [UI Usuarios]
      summary: Monta tela de edição de usuário
      description: |
        Retorna metadados do formulário + valores atuais do usuário
        para edição.
      parameters:
        - in: path
          name: usuarioId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Configuração do formulário de edição + valores atuais
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioFormTelaResposta'
              example:
                formId: "editar-usuario"
                titulo: "Editar Usuário"
                descricao: "Atualize os dados do usuário"
                modo: "EDICAO"
                submit:
                  method: "PATCH"
                  endpoint: "/usuarios/usr-0001"
                campos:
                  - id: "login"
                    type: "text"
                    label: "Login"
                    placeholder: "ex: joao.silva"
                    required: true
                    validation:
                      required: true
                      minLength: 3
                      maxLength: 64
                  - id: "nomeExibicao"
                    type: "text"
                    label: "Nome"
                    placeholder: "ex: João da Silva"
                    required: true
                  - id: "email"
                    type: "email"
                    label: "E-mail"
                    required: true
                  - id: "perfisAcessoIds"
                    type: "select_multiple"
                    label: "Perfis de Acesso"
                    required: true
                    dataSource:
                      type: "api"
                      endpoint: "/perfis-acesso"
                      valueField: "idPerfilAcesso"
                      labelField: "nomePerfilAcesso"
                  - id: "timeIds"
                    type: "select_multiple"
                    label: "Times"
                    required: false
                    dataSource:
                      type: "api"
                      endpoint: "/times"
                      valueField: "idTime"
                      labelField: "nomeTime"
                  - id: "ativo"
                    type: "checkbox"
                    label: "Usuário ativo"
                valoresIniciais:
                  login: "joao.silva"
                  nomeExibicao: "João da Silva"
                  email: "joao.silva@porto.com.br"
                  perfisAcessoIds:
                    - "ROLE_ADMIN"
                    - "ROLE_VIEWER"
                  timeIds:
                    - "time-plataforma"
                  ativo: true

  ########################
  # UI - COMPONENTES (TELAS)
  ########################
  /ui/componentes/lista:
    get:
      tags: [UI Componentes]
      summary: Monta tela de listagem de componentes
      description: |
        Retorna configuração (filtros, colunas, ações) + dados paginados
        para renderizar a tela de lista de componentes.
      parameters:
        - in: query
          name: pagina
          schema:
            type: integer
            default: 0
        - in: query
          name: tamanho
          schema:
            type: integer
            default: 20
        - in: query
          name: busca
          schema:
            type: string
          description: Filtro por nome, código ou tag
        - in: query
          name: tipoComponente
          schema:
            type: string
            enum: [BUSINESS, EXTENSION, TECHNICAL]
        - in: query
          name: dominioId
          schema:
            type: string
      responses:
        '200':
          description: Configuração da tela e dados da lista de componentes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponentesListaTelaResposta'
              example:
                paginaId: "lista-componentes"
                titulo: "Catálogo de Componentes"
                filtros:
                  - id: "busca"
                    type: "text"
                    label: "Buscar"
                    placeholder: "Nome, código ou tag"
                  - id: "tipoComponente"
                    type: "select"
                    label: "Tipo de Componente"
                    placeholder: "Selecione"
                    options:
                      - value: "BUSINESS"
                        label: "Business"
                      - value: "EXTENSION"
                        label: "Extension"
                      - value: "TECHNICAL"
                        label: "Technical"
                  - id: "dominioId"
                    type: "select"
                    label: "Domínio"
                    placeholder: "Selecione um domínio"
                    dataSource:
                      type: "api"
                      endpoint: "/dominios"
                      valueField: "idDominio"
                      labelField: "nomeDominio"
                colunas:
                  - id: "codigoComponente"
                    label: "Código"
                    width: "150px"
                    sortable: true
                  - id: "nomeComponente"
                    label: "Nome"
                    width: "260px"
                    sortable: true
                  - id: "tipoComponente"
                    label: "Tipo"
                    width: "140px"
                    sortable: true
                  - id: "dominio"
                    label: "Domínio"
                    width: "180px"
                    sortable: true
                  - id: "estadoCicloVida"
                    label: "Estado"
                    width: "140px"
                    sortable: true
                acoesLinha:
                  - id: "ver-detalhes"
                    label: "Ver Detalhes"
                    icon: "eye"
                    tipo: "link"
                    acao: "rota"
                    rotaFrontend: "/componentes/{idComponente}"
                  - id: "abrir-em-jira"
                    label: "Abrir em Jira"
                    icon: "jira"
                    tipo: "secondary"
                    acao: "link-externo"
                    endpoint: "https://jira.empresa.com/browse/{codigoComponente}"
                acoesPagina:
                  - id: "criar-componente"
                    label: "Criar Componente"
                    icon: "plus"
                    tipo: "primary"
                    acao: "rota"
                    rotaFrontend: "/componentes/novo"
                paginacao:
                  pagina: 0
                  tamanho: 20
                  totalElementos: 3
                  totalPaginas: 1
                linhas:
                  - idComponente: "cmp-000123"
                    codigoComponente: "PAGTO_BOLETO"
                    nomeComponente: "Parcelamento de Boletos"
                    tipoComponente: "BUSINESS"
                    dominio: "Pagamentos"
                    estadoCicloVida: "EM_PRODUCAO"
                  - idComponente: "cmp-000456"
                    codigoComponente: "CONS_DEBITOS_VEIC"
                    nomeComponente: "Consulta de Débitos Veiculares"
                    tipoComponente: "BUSINESS"
                    dominio: "Veículos"
                    estadoCicloVida: "EM_HOMOLOGACAO"
                  - idComponente: "cmp-000789"
                    codigoComponente: "EMAIL_SMTP"
                    nomeComponente: "Serviço SMTP Corporativo"
                    tipoComponente: "TECHNICAL"
                    dominio: "Plataforma"
                    estadoCicloVida: "EM_PRODUCAO"

  /ui/componentes/form-criacao:
    get:
      tags: [UI Componentes]
      summary: Monta wizard de criação de componente
      description: |
        Retorna a definição completa do wizard (steps, fields, validações),
        de forma semelhante ao JSON de exemplo de "create-component".
      responses:
        '200':
          description: Definição do wizard de criação de componente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponenteCriarWizardTelaResposta'
              example:
                formId: "create-component"
                version: 1
                title: "Criar Novo Componente"
                description: "Siga os passos para criar um novo componente"
                submit:
                  method: "POST"
                  endpoint: "/componentes"
                steps:
                  - id: "component-type"
                    order: 1
                    label: "Tipo"
                    title: "Tipo"
                    description: "Escolha o tipo de componente"
                    type: "form"
                    fields:
                      - id: "tipoComponente"
                        type: "card_select"
                        label: "Tipo de Componente"
                        helperText: "Escolha o tipo de componente"
                        required: true
                        options:
                          - value: "business"
                            label: "Business"
                            description: "Componente de negócio que representa uma funcionalidade completa"
                          - value: "extension"
                            label: "Extension"
                            description: "Extensão que adiciona funcionalidades a um Business Component"
                          - value: "technical"
                            label: "Technical"
                            description: "Serviço técnico reutilizável (ex: SMTP, Auth, Cache)"
                        validation:
                          required: true
                  - id: "basic-info"
                    order: 2
                    label: "Informações Básicas"
                    title: "Informações Básicas"
                    description: "Dados principais do componente"
                    type: "form"
                    fields:
                      - id: "nomeComponente"
                        type: "text"
                        label: "Nome do Componente"
                        placeholder: "Ex: Aprovação de Reserva"
                        required: true
                        validation:
                          required: true
                          minLength: 3
                          maxLength: 120
                      - id: "valueStreamId"
                        type: "select"
                        label: "Value Stream"
                        placeholder: "Selecione um Value Stream"
                        required: true
                        dataSource:
                          type: "api"
                          endpoint: "/value-streams"
                          valueField: "id"
                          labelField: "nome"
                        validation:
                          required: true
                      - id: "teamId"
                        type: "select"
                        label: "Time Responsável"
                        placeholder: "Selecione um Time"
                        required: true
                        dataSource:
                          type: "api"
                          endpoint: "/times"
                          valueField: "idTime"
                          labelField: "nomeTime"
                        validation:
                          required: true
                      - id: "tags"
                        type: "tags"
                        label: "Tags"
                        placeholder: "reserva, aprovação, veículos"
                        helperText: "Separadas por vírgula"
                        required: false
                      - id: "descricao"
                        type: "textarea"
                        label: "Descrição"
                        placeholder: "Descreva o componente..."
                        required: true
                        validation:
                          required: true
                          minLength: 10
                          maxLength: 2000
                  - id: "configurations"
                    order: 3
                    label: "Configurações"
                    title: "Configurações"
                    description: "Configurações específicas"
                    type: "form"
                    fields:
                      - id: "extensionComponents"
                        type: "checkbox_group"
                        label: "Extension Components"
                        helperText: "(selecione pelo menos um, se aplicável)"
                        required: false
                        dataSource:
                          type: "api"
                          endpoint: "/componentes?tipoComponente=EXTENSION"
                          valueField: "idComponente"
                          labelField: "nomeComponente"
                        validation:
                          minSelected: 0
                      - id: "technicalComponents"
                        type: "checkbox_group"
                        label: "Technical Components"
                        helperText: "(selecione pelo menos um)"
                        required: true
                        dataSource:
                          type: "api"
                          endpoint: "/componentes?tipoComponente=TECHNICAL"
                          valueField: "idComponente"
                          labelField: "nomeComponente"
                        validation:
                          required: true
                          minSelected: 1
                      - id: "infrastructureConfigs"
                        type: "checkbox_group"
                        label: "Configurações de Infraestrutura"
                        required: false
                        options:
                          - value: "create-microfrontend"
                            label: "Criar Microfrontend"
                          - value: "configure-database"
                            label: "Configurar Banco de Dados"
                          - value: "configure-api-gateway"
                            label: "Configurar API Gateway"
                  - id: "automations"
                    order: 4
                    label: "Automatizações"
                    title: "Automatizações"
                    description: "Automatizações a executar"
                    type: "form"
                    fields:
                      - id: "automations"
                        type: "checkbox_group"
                        label: "Automatizações"
                        helperText: "Selecione as automatizações que devem ser executadas ao criar o componente"
                        required: false
                        options:
                          - value: "create-git-repo"
                            label: "Criar repositório no Git"
                          - value: "create-ci-cd-pipeline"
                            label: "Criar pipeline CI/CD"
                          - value: "create-api-gateway-config"
                            label: "Criar configuração no API Gateway"
                          - value: "create-sso-realm"
                            label: "Criar Realm no SSO"
                          - value: "create-jira-cards"
                            label: "Criar cards no Jira"
                  - id: "summary"
                    order: 5
                    label: "Resumo"
                    title: "Resumo"
                    description: "Revise e confirme"
                    type: "summary"
                    layout:
                      - title: "Tipo"
                        fields: ["tipoComponente"]
                      - title: "Informações Básicas"
                        fields: ["nomeComponente", "valueStreamId", "teamId", "tags", "descricao"]
                      - title: "Dependências Selecionadas"
                        groups:
                          - title: "Extensions"
                            field: "extensionComponents"
                          - title: "Technicals"
                            field: "technicalComponents"
                      - title: "Infraestrutura"
                        fields: ["infrastructureConfigs"]
                      - title: "Automatizações selecionadas"
                        fields: ["automations"]

  ########################
  # AÇÕES - USUÁRIOS (CRUD)
  ########################
  /usuarios:
    post:
      tags: [Usuarios]
      summary: Cria usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioCriarRequest'
            example:
              login: "joao.silva"
              nomeExibicao: "João da Silva"
              email: "joao.silva@porto.com.br"
              ativo: true
              perfisAcessoIds:
                - "ROLE_ADMIN"
                - "ROLE_VIEWER"
              timeIds:
                - "time-plataforma"
      responses:
        '201':
          description: Usuário criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioDetalhe'
              example:
                idUsuario: "usr-0001"
                login: "joao.silva"
                nomeExibicao: "João da Silva"
                email: "joao.silva@porto.com.br"
                ativo: true
                perfisAcessoIds:
                  - "ROLE_ADMIN"
                  - "ROLE_VIEWER"
                timeIds:
                  - "time-plataforma"
    get:
      tags: [Usuarios]
      summary: Lista usuários (uso interno / integrações)
      parameters:
        - in: query
          name: pagina
          schema:
            type: integer
            default: 0
        - in: query
          name: tamanho
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Lista paginada de usuários
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginaUsuario'
              example:
                conteudo:
                  - idUsuario: "usr-0001"
                    login: "joao.silva"
                    nomeExibicao: "João da Silva"
                    email: "joao.silva@porto.com.br"
                    ativo: true
                  - idUsuario: "usr-0002"
                    login: "maria.oliveira"
                    nomeExibicao: "Maria Oliveira"
                    email: "maria.oliveira@porto.com.br"
                    ativo: false
                pagina: 0
                tamanho: 20
                totalElementos: 2
                totalPaginas: 1

  /usuarios/{usuarioId}:
    get:
      tags: [Usuarios]
      summary: Detalha usuário
      parameters:
        - in: path
          name: usuarioId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Detalhes do usuário
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioDetalhe'
              example:
                idUsuario: "usr-0001"
                login: "joao.silva"
                nomeExibicao: "João da Silva"
                email: "joao.silva@porto.com.br"
                ativo: true
                perfisAcessoIds:
                  - "ROLE_ADMIN"
                  - "ROLE_VIEWER"
                timeIds:
                  - "time-plataforma"
    patch:
      tags: [Usuarios]
      summary: Atualiza usuário
      parameters:
        - in: path
          name: usuarioId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioAtualizarRequest'
            example:
              nomeExibicao: "João da Silva Neto"
              email: "joao.silva.neto@porto.com.br"
              ativo: true
              perfisAcessoIds:
                - "ROLE_ADMIN"
              timeIds:
                - "time-plataforma"
                - "time-dom-pagamentos"
      responses:
        '200':
          description: Usuário atualizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioDetalhe'
              example:
                idUsuario: "usr-0001"
                login: "joao.silva"
                nomeExibicao: "João da Silva Neto"
                email: "joao.silva.neto@porto.com.br"
                ativo: true
                perfisAcessoIds:
                  - "ROLE_ADMIN"
                timeIds:
                  - "time-plataforma"
                  - "time-dom-pagamentos"

  ########################
  # AÇÕES - COMPONENTES
  ########################
  /componentes:
    post:
      tags: [Componentes]
      summary: Cria um novo componente
      description: |
        Endpoint "burro" de ação. O front envia o payload já consolidado
        com base no wizard retornado por /ui/componentes/form-criacao.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ComponenteCriarRequest'
            example:
              tipoComponente: "business"
              nomeComponente: "Aprovação de Reserva de Veículos"
              valueStreamId: "vs-reservas-veiculos"
              teamId: "time-reservas-veiculos"
              tags:
                - "reservas"
                - "frota"
                - "aprovacao"
              descricao: "Componente responsável pela jornada de aprovação de reservas de veículos corporativos."
              extensionComponents:
                - "cmp-ext-aprovacao-geral"
              technicalComponents:
                - "cmp-tech-sso"
                - "cmp-tech-email-smtp"
              infrastructureConfigs:
                - "create-microfrontend"
                - "configure-api-gateway"
              automations:
                - "create-git-repo"
                - "create-ci-cd-pipeline"
                - "create-jira-cards"
      responses:
        '201':
          description: Componente criado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComponenteDetalhe'
              example:
                idComponente: "cmp-001234"
                codigoComponente: "RESERVA_APROVACAO"
                nomeComponente: "Aprovação de Reserva de Veículos"
                tipoComponente: "BUSINESS"
                dominio: "Frota"
                estadoCicloVida: "EM_DESENVOLVIMENTO"
                descricao: "Componente responsável pela jornada de aprovação de reservas de veículos corporativos."
                tags:
                  - "reservas"
                  - "frota"
                  - "aprovacao"
    get:
      tags: [Componentes]
      summary: Lista componentes (uso interno / integrações)
      parameters:
        - in: query
          name: pagina
          schema:
            type: integer
            default: 0
        - in: query
          name: tamanho
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Lista paginada de componentes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginaComponenteResumo'
              example:
                conteudo:
                  - idComponente: "cmp-000123"
                    codigoComponente: "PAGTO_BOLETO"
                    nomeComponente: "Parcelamento de Boletos"
                    tipoComponente: "BUSINESS"
                    dominio: "Pagamentos"
                    estadoCicloVida: "EM_PRODUCAO"
                  - idComponente: "cmp-000456"
                    codigoComponente: "CONS_DEBITOS_VEIC"
                    nomeComponente: "Consulta de Débitos Veiculares"
                    tipoComponente: "BUSINESS"
                    dominio: "Veículos"
                    estadoCicloVida: "EM_HOMOLOGACAO"
                pagina: 0
                tamanho: 20
                totalElementos: 2
                totalPaginas: 1

components:
  schemas:
    ########################
    # AUTENTICAÇÃO
    ########################
    TokenResposta:
      type: object
      properties:
        tokenAcesso:
          type: string
        tipoToken:
          type: string
        expiraEm:
          type: integer

    ########################
    # DOMAIN - USUÁRIO
    ########################
    Usuario:
      type: object
      properties:
        idUsuario:
          type: string
        login:
          type: string
        nomeExibicao:
          type: string
        email:
          type: string
        ativo:
          type: boolean

    UsuarioDetalhe:
      allOf:
        - $ref: '#/components/schemas/Usuario'
        - type: object
          properties:
            perfisAcessoIds:
              type: array
              items:
                type: string
            timeIds:
              type: array
              items:
                type: string

    UsuarioCriarRequest:
      type: object
      required: [login, nomeExibicao, email]
      properties:
        login:
          type: string
        nomeExibicao:
          type: string
        email:
          type: string
        ativo:
          type: boolean
        perfisAcessoIds:
          type: array
          items:
            type: string
        timeIds:
          type: array
          items:
            type: string

    UsuarioAtualizarRequest:
      type: object
      properties:
        nomeExibicao:
          type: string
        email:
          type: string
        ativo:
          type: boolean
        perfisAcessoIds:
          type: array
          items:
            type: string
        timeIds:
          type: array
          items:
            type: string

    PaginaUsuario:
      type: object
      properties:
        conteudo:
          type: array
          items:
            $ref: '#/components/schemas/UsuarioDetalhe'
        pagina:
          type: integer
        tamanho:
          type: integer
        totalElementos:
          type: integer
        totalPaginas:
          type: integer

    ########################
    # DOMAIN - COMPONENTE
    ########################
    ComponenteResumo:
      type: object
      properties:
        idComponente:
          type: string
        codigoComponente:
          type: string
        nomeComponente:
          type: string
        tipoComponente:
          type: string
        dominio:
          type: string
        estadoCicloVida:
          type: string

    ComponenteDetalhe:
      allOf:
        - $ref: '#/components/schemas/ComponenteResumo'
        - type: object
          properties:
            descricao:
              type: string
            tags:
              type: array
              items:
                type: string

    ComponenteCriarRequest:
      type: object
      required: [tipoComponente, nomeComponente]
      properties:
        tipoComponente:
          type: string
          description: business | extension | technical
        nomeComponente:
          type: string
        valueStreamId:
          type: string
        teamId:
          type: string
        tags:
          type: array
          items:
            type: string
        descricao:
          type: string
        extensionComponents:
          type: array
          items:
            type: string
        technicalComponents:
          type: array
          items:
            type: string
        infrastructureConfigs:
          type: array
          items:
            type: string
        automations:
          type: array
          items:
            type: string

    PaginaComponenteResumo:
      type: object
      properties:
        conteudo:
          type: array
          items:
            $ref: '#/components/schemas/ComponenteResumo'
        pagina:
          type: integer
        tamanho:
          type: integer
        totalElementos:
          type: integer
        totalPaginas:
          type: integer

    ########################
    # UI - LAYOUT
    ########################
    LayoutAppInfo:
      type: object
      properties:
        id:
          type: string
        nome:
          type: string
        subTitulo:
          type: string
        logoUrl:
          type: string

    LayoutUsuarioLogado:
      type: object
      properties:
        idUsuario:
          type: string
        nomeExibicao:
          type: string
        email:
          type: string
        iniciais:
          type: string
        avatarUrl:
          type: string
          nullable: true

    LayoutMenuItem:
      type: object
      properties:
        id:
          type: string
        label:
          type: string
        icone:
          type: string
        rotaFrontend:
          type: string
        ativo:
          type: boolean
        habilitado:
          type: boolean

    LayoutAreaLogadaResposta:
      type: object
      properties:
        app:
          $ref: '#/components/schemas/LayoutAppInfo'
        usuario:
          $ref: '#/components/schemas/LayoutUsuarioLogado'
        menu:
          type: array
          items:
            $ref: '#/components/schemas/LayoutMenuItem'

    ########################
    # UI - DASHBOARD
    ########################
    DashboardCardResumo:
      type: object
      properties:
        idCard:
          type: string
        titulo:
          type: string
        descricao:
          type: string
        valor:
          type: number
        icone:
          type: string
        configuravel:
          type: boolean

    DashboardDestaqueGrafico:
      type: object
      properties:
        valorAtual:
          type: number
        textoDestaque:
          type: string
        variacaoPercentual:
          type: number
        textoComparacao:
          type: string

    DashboardPontoSerie:
      type: object
      properties:
        mes:
          type: string
        quantidade:
          type: number

    DashboardSerieGrafico:
      type: object
      properties:
        unidadeEixoX:
          type: string
        unidadeEixoY:
          type: string
        pontos:
          type: array
          items:
            $ref: '#/components/schemas/DashboardPontoSerie'

    DashboardGraficoComponentes:
      type: object
      properties:
        titulo:
          type: string
        destaque:
          $ref: '#/components/schemas/DashboardDestaqueGrafico'
        serie:
          $ref: '#/components/schemas/DashboardSerieGrafico'

    DashboardUsuarioEvento:
      type: object
      properties:
        nome:
          type: string
        iniciais:
          type: string

    DashboardEventoRecente:
      type: object
      properties:
        idEvento:
          type: string
        usuario:
          $ref: '#/components/schemas/DashboardUsuarioEvento'
        tipoEvento:
          type: string
        descricaoCurta:
          type: string
        componenteNome:
          type: string
        haQuantoTempo:
          type: string
        status:
          type: string

    DashboardEventosRecentesBloco:
      type: object
      properties:
        titulo:
          type: string
        descricao:
          type: string
        itens:
          type: array
          items:
            $ref: '#/components/schemas/DashboardEventoRecente'

    DashboardIntegracaoStatusItem:
      type: object
      properties:
        idIntegracao:
          type: string
        nome:
          type: string
        status:
          type: string
        ultimaSincronizacao:
          type: string
          format: date-time

    DashboardIntegracoesBloco:
      type: object
      properties:
        titulo:
          type: string
        descricao:
          type: string
        integracoes:
          type: array
          items:
            $ref: '#/components/schemas/DashboardIntegracaoStatusItem'

    DashboardTelaResposta:
      type: object
      properties:
        paginaId:
          type: string
        titulo:
          type: string
        subTitulo:
          type: string
        cardsResumo:
          type: array
          items:
            $ref: '#/components/schemas/DashboardCardResumo'
        graficoComponentesCriados:
          $ref: '#/components/schemas/DashboardGraficoComponentes'
        eventosRecentes:
          $ref: '#/components/schemas/DashboardEventosRecentesBloco'
        statusIntegracoes:
          $ref: '#/components/schemas/DashboardIntegracoesBloco'

    ########################
    # UI GENÉRICO (FORM / TABELA)
    ########################
    UiCampoValidation:
      type: object
      properties:
        required:
          type: boolean
        minLength:
          type: integer
        maxLength:
          type: integer
        minSelected:
          type: integer

    UiCampoOption:
      type: object
      properties:
        value:
          type: string
        label:
          type: string
        description:
          type: string

    UiCampoDataSource:
      type: object
      properties:
        type:
          type: string
          description: api | static | other
        endpoint:
          type: string
        valueField:
          type: string
        labelField:
          type: string

    UiCampoForm:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          description: text | textarea | select | select_multiple | tags | card_select | checkbox_group | email | checkbox
        label:
          type: string
        placeholder:
          type: string
        helperText:
          type: string
        required:
          type: boolean
        options:
          type: array
          items:
            $ref: '#/components/schemas/UiCampoOption'
        dataSource:
          $ref: '#/components/schemas/UiCampoDataSource'
        validation:
          $ref: '#/components/schemas/UiCampoValidation'

    UiSubmitConfig:
      type: object
      properties:
        method:
          type: string
        endpoint:
          type: string

    UiPaginacao:
      type: object
      properties:
        pagina:
          type: integer
        tamanho:
          type: integer
        totalElementos:
          type: integer
        totalPaginas:
          type: integer

    UiFiltroDef:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          description: text | select | checkbox | etc.
        label:
          type: string
        placeholder:
          type: string
        options:
          type: array
          items:
            $ref: '#/components/schemas/UiCampoOption'
        dataSource:
          $ref: '#/components/schemas/UiCampoDataSource'

    UiColunaDef:
      type: object
      properties:
        id:
          type: string
        label:
          type: string
        width:
          type: string
        sortable:
          type: boolean

    UiAcaoDef:
      type: object
      properties:
        id:
          type: string
        label:
          type: string
        icon:
          type: string
        tipo:
          type: string
          description: primary | secondary | danger | link
        acao:
          type: string
          description: rota | api | modal | link-externo
        endpoint:
          type: string
        metodoHttp:
          type: string
        rotaFrontend:
          type: string

    ########################
    # UI - USUÁRIOS
    ########################
    UsuarioLinhaGrid:
      type: object
      properties:
        idUsuario:
          type: string
        login:
          type: string
        nomeExibicao:
          type: string
        email:
          type: string
        ativo:
          type: boolean

    UsuariosListaTelaResposta:
      type: object
      properties:
        paginaId:
          type: string
        titulo:
          type: string
        filtros:
          type: array
          items:
            $ref: '#/components/schemas/UiFiltroDef'
        colunas:
          type: array
          items:
            $ref: '#/components/schemas/UiColunaDef'
        acoesLinha:
          type: array
          items:
            $ref: '#/components/schemas/UiAcaoDef'
        acoesPagina:
          type: array
          items:
            $ref: '#/components/schemas/UiAcaoDef'
        paginacao:
          $ref: '#/components/schemas/UiPaginacao'
        linhas:
          type: array
          items:
            $ref: '#/components/schemas/UsuarioLinhaGrid'

    UsuarioFormTelaResposta:
      type: object
      properties:
        formId:
          type: string
        titulo:
          type: string
        descricao:
          type: string
        modo:
          type: string
          description: CRIACAO | EDICAO
        submit:
          $ref: '#/components/schemas/UiSubmitConfig'
        campos:
          type: array
          items:
            $ref: '#/components/schemas/UiCampoForm'
        valoresIniciais:
          type: object
          additionalProperties: true

    ########################
    # UI - COMPONENTES
    ########################
    ComponenteLinhaGrid:
      type: object
      properties:
        idComponente:
          type: string
        codigoComponente:
          type: string
        nomeComponente:
          type: string
        tipoComponente:
          type: string
        dominio:
          type: string
        estadoCicloVida:
          type: string

    ComponentesListaTelaResposta:
      type: object
      properties:
        paginaId:
          type: string
        titulo:
          type: string
        filtros:
          type: array
          items:
            $ref: '#/components/schemas/UiFiltroDef'
        colunas:
          type: array
          items:
            $ref: '#/components/schemas/UiColunaDef'
        acoesLinha:
          type: array
          items:
            $ref: '#/components/schemas/UiAcaoDef'
        acoesPagina:
          type: array
          items:
            $ref: '#/components/schemas/UiAcaoDef'
        paginacao:
          $ref: '#/components/schemas/UiPaginacao'
        linhas:
          type: array
          items:
            $ref: '#/components/schemas/ComponenteLinhaGrid'

    ########################
    # UI - WIZARD COMPONENTE
    ########################
    UiSummaryGroup:
      type: object
      properties:
        title:
          type: string
        field:
          type: string

    UiSummarySection:
      type: object
      properties:
        title:
          type: string
        fields:
          type: array
          items:
            type: string
        groups:
          type: array
          items:
            $ref: '#/components/schemas/UiSummaryGroup'

    UiWizardStep:
      type: object
      properties:
        id:
          type: string
        order:
          type: integer
        label:
          type: string
        title:
          type: string
        description:
          type: string
        type:
          type: string
          description: form | summary
        fields:
          type: array
          items:
            $ref: '#/components/schemas/UiCampoForm'
        layout:
          type: array
          items:
            $ref: '#/components/schemas/UiSummarySection'

    ComponenteCriarWizardTelaResposta:
      type: object
      properties:
        formId:
          type: string
        version:
          type: integer
        title:
          type: string
        description:
          type: string
        submit:
          $ref: '#/components/schemas/UiSubmitConfig'
        steps:
          type: array
          items:
            $ref: '#/components/schemas/UiWizardStep'
